ğŸš€ Starting Playwright test for zoom bugs...

ğŸŒ Navigating to http://localhost:3000/editor...
ğŸ“ ğŸ”„ updateViewport called with changes: {zoom: 0.9995795592194884, pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {zoom: 0.9736614651490442, pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {zoom: 0.8894239986104043, pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {zoom: 0.7821538209838371, pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {zoom: 0.6880946792872973, pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {zoom: 0.6265004177146073, pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {zoom: 0.5958001447252005, pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {zoom: 0.5838287667458933, pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {zoom: 0.5803344244588411, pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {zoom: 0.5795592006922747, pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {zoom: 0.5794349485776517, pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {zoom: 0.5794207795294338, pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {zoom: 0.5794196993505861, pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {zoom: 0.5794196445674303, pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {zoom: 0.5794196428859489, pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {zoom: 0.5794196428573757, pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {zoom: 0.5794196428571435, pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {zoom: 0.5794196428571429, pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {zoom: 0.5794196428571429, pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {zoom: 0.5794196428571429, pan: Object}

âœ… Page loaded

ğŸ“Š Found canvases: [
  {
    index: 0,
    width: 14,
    height: 625,
    rect: {
      x: 491,
      y: 95,
      width: 14,
      height: 625,
      top: 95,
      right: 505,
      bottom: 720,
      left: 491
    }
  },
  {
    index: 1,
    width: 0,
    height: 625,
    rect: {
      x: 2,
      y: 95,
      width: 0,
      height: 625,
      top: 95,
      right: 2,
      bottom: 720,
      left: 2
    }
  },
  {
    index: 2,
    width: 0,
    height: 625,
    rect: {
      x: 2,
      y: 95,
      width: 0,
      height: 625,
      top: 95,
      right: 2,
      bottom: 720,
      left: 2
    }
  },
  {
    index: 3,
    width: 505,
    height: 616,
    rect: {
      x: 513.6015625,
      y: 104,
      width: 505.59375,
      height: 616,
      top: 104,
      right: 1019.1953125,
      bottom: 720,
      left: 513.6015625
    }
  }
]
ğŸ¯ Using canvas index 3 (largest by area)
ğŸ“ Canvas bounds: { x: 513.6015625, y: 104, width: 505.59375, height: 616 }

â³ Waiting for zoomToFit animation to complete...
ğŸ“Š Initial state: {
  zoom: 0.5794196428571429,
  pan: { x: 21.02901785714286, y: 221.08705357142856 }
}

ğŸ§ª BUG 1 TEST: Pan immediately after load (no zoom)...
ğŸ–±ï¸  Dragging 100px from (564, 154) to (664, 254)
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“Š After first pan: {
  zoom: 0.5794196428571429,
  pan: { x: 221.02901785714286, y: 421.08705357142856 }
}
ğŸ“ Pan delta: (200.0, 200.0) - Expected: ~100px
âš ï¸  Pan multiplier: 2.00x

ğŸ§ª BUG 2 TEST: Zoom in, then pan...
ğŸ“ ğŸ” ViewportManager.zoomAt called: {screenPoint: Object, factor: 1.1, currentZoom: 1, animate: false}
ğŸ“ ğŸ” zoomAt: Calling updateViewport directly
ğŸ“ ğŸ”„ updateViewport called with changes: {zoom: 1.1, pan: Object}
ğŸ“ ğŸ” ViewportManager.zoomAt called: {screenPoint: Object, factor: 1.1, currentZoom: 0.5794196428571429, animate: false}
ğŸ“ ğŸ” zoomAt: Calling updateViewport directly
ğŸ“ ğŸ”„ updateViewport called with changes: {zoom: 0.6373616071428572, pan: Object}
ğŸ“ ğŸ” ViewportManager.zoomAt called: {screenPoint: Object, factor: 1.1, currentZoom: 0.6373616071428572, animate: false}
ğŸ“ ğŸ” zoomAt: Calling updateViewport directly
ğŸ“ ğŸ”„ updateViewport called with changes: {zoom: 0.701097767857143, pan: Object}
ğŸ“Š After zoom: {
  zoom: 0.701097767857143,
  pan: { x: 214.44143973214287, y: 444.83533482142855 }
}
ğŸ–±ï¸  Dragging 100px from (564, 154) to (664, 254)
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“ ğŸ”„ updateViewport called with changes: {pan: Object}
ğŸ“Š After second pan: {
  zoom: 0.701097767857143,
  pan: { x: 414.44143973214284, y: 644.8353348214285 }
}
ğŸ“ Pan delta: (200.0, 200.0) - Expected: ~100px
âš ï¸  Pan multiplier: 2.00x

============================================================
ğŸ“‹ SUMMARY
============================================================
BUG 1 (Initial pan):
  Zoom: 0.5794 â†’ 0.5794 (âœ… SAME)
  Pan multiplier: 2.00x (expected: ~1.0x)

BUG 2 (Pan after zoom):
  Zoom: 0.7011 â†’ 0.7011 (âœ… SAME)
  Pan multiplier: 2.00x (expected: ~1.0x)
============================================================

â¸ï¸  Browser will stay open for 30 seconds for manual inspection...
ğŸ¥ Video is being recorded to ./test-videos/
